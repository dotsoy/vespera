# ğŸŒ å¤šæ•°æ®æºä¸­é—´å±‚æ¶æ„è®¾è®¡

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

**å¯æ˜æ˜Ÿå¤šæ•°æ®æºä¸­é—´å±‚**æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®è·å–å’Œç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šä¸ªé‡‘èæ•°æ®æºçš„æ¥å…¥ã€èåˆå’Œæ™ºèƒ½è°ƒåº¦ã€‚è¯¥ç³»ç»Ÿæä¾›äº†ç»Ÿä¸€çš„APIæ¥å£ï¼Œå±è”½äº†ä¸åŒæ•°æ®æºçš„å·®å¼‚ï¼Œä¸ºä¸Šå±‚åº”ç”¨æä¾›å¯é ã€é«˜æ•ˆçš„æ•°æ®æœåŠ¡ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚ (Application Layer)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æŠ€æœ¯åˆ†æå™¨  â”‚  å›æµ‹å¼•æ“  â”‚  ä¿¡å·èåˆ  â”‚  ç­–ç•¥å¼•æ“  â”‚  å‰ç«¯ç•Œé¢  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ç»Ÿä¸€æ•°æ®æœåŠ¡ (Unified Data Service)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   æ•°æ®æºç®¡ç†å™¨   â”‚  â”‚   æ•°æ®èåˆå¼•æ“   â”‚  â”‚   ç¼“å­˜ç®¡ç†å™¨    â”‚ â”‚
â”‚  â”‚ DataSourceMgr   â”‚  â”‚ DataFusionEng   â”‚  â”‚  CacheManager   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æ•°æ®æºæŠ½è±¡å±‚ (Data Source Layer)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  BaseDataSource â”‚  â”‚   DataRequest   â”‚  â”‚  DataResponse   â”‚ â”‚
â”‚  â”‚   (æŠ½è±¡åŸºç±»)     â”‚  â”‚   (è¯·æ±‚å¯¹è±¡)     â”‚  â”‚   (å“åº”å¯¹è±¡)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               å…·ä½“æ•°æ®æºå®ç° (Data Source Implementations)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ TushareDataSrc  â”‚  â”‚YahooFinanceDS   â”‚  â”‚AlphaVantageDS   â”‚ â”‚
â”‚  â”‚   (Tushare)     â”‚  â”‚ (Yahoo Finance) â”‚  â”‚ (Alpha Vantage) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   AkshareDS     â”‚  â”‚    WindDS       â”‚  â”‚   LocalFileDS   â”‚ â”‚
â”‚  â”‚   (Akshare)     â”‚  â”‚    (Wind)       â”‚  â”‚  (æœ¬åœ°æ–‡ä»¶)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### ğŸ”Œ ç»Ÿä¸€æ•°æ®æ¥å£

#### æ•°æ®æºæŠ½è±¡åŸºç±»
```python
class BaseDataSource(ABC):
    """æ•°æ®æºæŠ½è±¡åŸºç±»"""
    
    @abstractmethod
    def initialize(self) -> bool:
        """åˆå§‹åŒ–æ•°æ®æºè¿æ¥"""
        pass
    
    @abstractmethod
    def fetch_data(self, request: DataRequest) -> DataResponse:
        """è·å–æ•°æ®"""
        pass
    
    @abstractmethod
    def check_availability(self) -> DataSourceStatus:
        """æ£€æŸ¥æ•°æ®æºå¯ç”¨æ€§"""
        pass
```

#### æ ‡å‡†åŒ–æ•°æ®è¯·æ±‚/å“åº”
- **DataRequest**: ç»Ÿä¸€çš„æ•°æ®è¯·æ±‚æ ¼å¼
- **DataResponse**: æ ‡å‡†åŒ–çš„æ•°æ®å“åº”æ ¼å¼
- **DataType**: æ”¯æŒçš„æ•°æ®ç±»å‹æšä¸¾

### ğŸ›ï¸ æ•°æ®æºç®¡ç†

#### æ”¯æŒçš„æ•°æ®æºç±»å‹
| æ•°æ®æº | ç±»å‹ | ä¼˜å…ˆçº§ | è´¹ç”¨ | ç‰¹ç‚¹ |
|--------|------|--------|------|------|
| **Tushare** | ä¸“ä¸šæ¥å£ | 1 (æœ€é«˜) | ä»˜è´¹ | æ•°æ®è´¨é‡é«˜ï¼Œæ›´æ–°åŠæ—¶ |
| **AllTick** | ä¸“ä¸šAPI | 2 | ä»˜è´¹ | å®æ—¶æ•°æ®ï¼Œå¤šå¸‚åœºè¦†ç›– |
| **Yahoo Finance** | å…è´¹æ¥å£ | 3 | å…è´¹ | è¦†ç›–å…¨çƒå¸‚åœºï¼Œç¨³å®šå¯é  |
| **Alpha Vantage** | APIæœåŠ¡ | 4 | å…è´¹/ä»˜è´¹ | åŠŸèƒ½ä¸°å¯Œï¼Œæœ‰è¯·æ±‚é™åˆ¶ |
| **Akshare** | å¼€æºåº“ | 5 | å…è´¹ | æ•°æ®æºä¸°å¯Œï¼Œç¤¾åŒºç»´æŠ¤ |
| **Wind** | ä¸“ä¸šç»ˆç«¯ | 6 | ä»˜è´¹ | æœºæ„çº§æ•°æ®ï¼ŒåŠŸèƒ½å¼ºå¤§ |
| **æœ¬åœ°æ–‡ä»¶** | æ–‡ä»¶ç³»ç»Ÿ | 7 | å…è´¹ | ç¦»çº¿æ•°æ®ï¼Œå¿«é€Ÿè®¿é—® |

#### æ™ºèƒ½è°ƒåº¦ç­–ç•¥
- **ä¼˜å…ˆçº§è°ƒåº¦**: æŒ‰æ•°æ®æºä¼˜å…ˆçº§è‡ªåŠ¨é€‰æ‹©
- **æ•…éšœè½¬ç§»**: ä¸»æ•°æ®æºå¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢å¤‡ç”¨æº
- **è´Ÿè½½å‡è¡¡**: åˆ†æ•£è¯·æ±‚å‹åŠ›ï¼Œé¿å…é¢‘ç‡é™åˆ¶
- **å¥åº·ç›‘æ§**: å®æ—¶ç›‘æ§æ•°æ®æºçŠ¶æ€

### ğŸ”„ æ•°æ®èåˆå¼•æ“

#### èåˆç­–ç•¥
1. **ç¬¬ä¸€ä¸ªæˆåŠŸ** (`first_success`)
   - ä½¿ç”¨ç¬¬ä¸€ä¸ªæˆåŠŸè¿”å›æ•°æ®çš„æ•°æ®æº
   - é€‚ç”¨äºå¯¹å»¶è¿Ÿæ•æ„Ÿçš„åœºæ™¯

2. **åŠ æƒå¹³å‡** (`weighted_average`)
   - åŸºäºæ•°æ®æºæƒé‡è¿›è¡ŒåŠ æƒå¹³å‡
   - é€‚ç”¨äºæ•°å€¼å‹æ•°æ®çš„ç²¾åº¦æå‡

3. **ä¸­ä½æ•°** (`median`)
   - ä½¿ç”¨å¤šä¸ªæ•°æ®æºçš„ä¸­ä½æ•°
   - æœ‰æ•ˆè¿‡æ»¤å¼‚å¸¸å€¼

4. **ä¸€è‡´æ€§æŠ•ç¥¨** (`consensus`)
   - åŸºäºå¤šæ•°æ®æºä¸€è‡´æ€§æŠ•ç¥¨
   - æé«˜æ•°æ®å¯é æ€§

5. **åŸºäºè´¨é‡** (`quality_based`)
   - æ ¹æ®æ•°æ®è´¨é‡è¯„åˆ†åŠ¨æ€é€‰æ‹©
   - è‡ªé€‚åº”æœ€ä¼˜æ•°æ®æº

#### æ•°æ®è´¨é‡è¯„ä¼°
- **å®Œæ•´æ€§**: ç¼ºå¤±å€¼æ¯”ä¾‹è¯„ä¼°
- **ä¸€è‡´æ€§**: å¤šæºæ•°æ®äº¤å‰éªŒè¯
- **å‡†ç¡®æ€§**: æ•°æ®åˆç†æ€§æ£€æŸ¥
- **åŠæ—¶æ€§**: æ•°æ®è·å–æ—¶æ•ˆæ€§

### ğŸ’¾ æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ

#### å¤šçº§ç¼“å­˜æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å†…å­˜ç¼“å­˜       â”‚    â”‚   ç£ç›˜ç¼“å­˜       â”‚    â”‚  æ•°æ®åº“ç¼“å­˜      â”‚
â”‚  (Memory Cache) â”‚    â”‚  (Disk Cache)   â”‚    â”‚(Database Cache) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ æœ€å¿«è®¿é—®      â”‚    â”‚ â€¢ æŒä¹…åŒ–å­˜å‚¨     â”‚    â”‚ â€¢ å¤§å®¹é‡å­˜å‚¨     â”‚
â”‚ â€¢ æœ‰é™å®¹é‡      â”‚    â”‚ â€¢ ä¸­ç­‰é€Ÿåº¦      â”‚    â”‚ â€¢ ç»“æ„åŒ–æŸ¥è¯¢     â”‚
â”‚ â€¢ LRUç­–ç•¥       â”‚    â”‚ â€¢ æ–‡ä»¶ç³»ç»Ÿ      â”‚    â”‚ â€¢ ç»Ÿè®¡åˆ†æ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç¼“å­˜ç­–ç•¥
- **LRUæ·˜æ±°**: æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•
- **TTLè¿‡æœŸ**: åŸºäºæ—¶é—´çš„è‡ªåŠ¨è¿‡æœŸ
- **æ™ºèƒ½é¢„å–**: é¢„æµ‹æ€§æ•°æ®åŠ è½½
- **åˆ†å±‚å­˜å‚¨**: çƒ­æ•°æ®å†…å­˜ï¼Œå†·æ•°æ®ç£ç›˜

### ğŸ›¡ï¸ å®¹é”™ä¸ç›‘æ§

#### æ•…éšœå¤„ç†æœºåˆ¶
- **è‡ªåŠ¨é‡è¯•**: æŒ‡æ•°é€€é¿é‡è¯•ç­–ç•¥
- **ç†”æ–­å™¨**: é˜²æ­¢çº§è”æ•…éšœ
- **é™çº§æœåŠ¡**: æ ¸å¿ƒåŠŸèƒ½ä¿éšœ
- **å¼‚å¸¸éš”ç¦»**: å•ä¸ªæ•°æ®æºæ•…éšœä¸å½±å“æ•´ä½“

#### ç›‘æ§æŒ‡æ ‡
- **å¯ç”¨æ€§ç›‘æ§**: æ•°æ®æºåœ¨çº¿çŠ¶æ€
- **æ€§èƒ½ç›‘æ§**: å“åº”æ—¶é—´ã€ååé‡
- **è´¨é‡ç›‘æ§**: æ•°æ®å®Œæ•´æ€§ã€å‡†ç¡®æ€§
- **æˆæœ¬ç›‘æ§**: APIè°ƒç”¨æ¬¡æ•°ã€è´¹ç”¨ç»Ÿè®¡

## ğŸš€ æŠ€æœ¯å®ç°äº®ç‚¹

### 1. è®¾è®¡æ¨¡å¼åº”ç”¨

#### å·¥å‚æ¨¡å¼
```python
class DataSourceFactory:
    """æ•°æ®æºå·¥å‚ï¼Œè´Ÿè´£åˆ›å»ºä¸åŒç±»å‹çš„æ•°æ®æº"""
    
    def create_data_source(self, source_type: DataSourceType) -> BaseDataSource:
        if source_type == DataSourceType.TUSHARE:
            return TushareDataSource()
        elif source_type == DataSourceType.YAHOO_FINANCE:
            return YahooFinanceDataSource()
        # ... å…¶ä»–æ•°æ®æº
```

#### ç­–ç•¥æ¨¡å¼
```python
class DataFusionEngine:
    """æ•°æ®èåˆå¼•æ“ï¼Œæ”¯æŒå¤šç§èåˆç­–ç•¥"""
    
    def __init__(self):
        self.fusion_strategies = {
            FusionStrategy.FIRST_SUCCESS: self._first_success_fusion,
            FusionStrategy.WEIGHTED_AVERAGE: self._weighted_average_fusion,
            # ... å…¶ä»–ç­–ç•¥
        }
```

#### è§‚å¯Ÿè€…æ¨¡å¼
```python
class DataSourceManager:
    """æ•°æ®æºç®¡ç†å™¨ï¼Œæ”¯æŒçŠ¶æ€å˜åŒ–é€šçŸ¥"""
    
    def notify_status_change(self, source: str, status: DataSourceStatus):
        for observer in self.observers:
            observer.on_status_change(source, status)
```

### 2. å¼‚æ­¥å¹¶å‘å¤„ç†

#### å¹¶è¡Œæ•°æ®è·å–
```python
with ThreadPoolExecutor(max_workers=self.max_workers) as executor:
    future_to_source = {
        executor.submit(self._fetch_from_source, source, request): source
        for source in available_sources
    }
    
    for future in as_completed(future_to_source):
        # å¤„ç†å¹¶å‘ç»“æœ
```

#### éé˜»å¡ç¼“å­˜
```python
async def get_data_async(self, request: DataRequest) -> DataResponse:
    # å¼‚æ­¥ç¼“å­˜æŸ¥è¯¢
    cached = await self.cache_manager.get_async(request)
    if cached:
        return cached
    
    # å¼‚æ­¥æ•°æ®è·å–
    response = await self.fetch_data_async(request)
    await self.cache_manager.put_async(request, response)
    return response
```

### 3. é…ç½®é©±åŠ¨æ¶æ„

#### çµæ´»é…ç½®ç³»ç»Ÿ
```python
# æ•°æ®æºé…ç½®
source_configs = [
    {
        'type': 'tushare',
        'priority': 1,
        'rate_limit': 200,
        'timeout': 30
    },
    {
        'type': 'yahoo_finance',
        'priority': 2,
        'rate_limit': 2000,
        'timeout': 15
    }
]

# ç¼“å­˜é…ç½®
cache_config = {
    DataType.DAILY_QUOTES: {
        'ttl': timedelta(hours=1),
        'level': CacheLevel.MEMORY,
        'strategy': CacheStrategy.SMART
    }
}
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜æ€§èƒ½æå‡

| åœºæ™¯ | æ— ç¼“å­˜è€—æ—¶ | æœ‰ç¼“å­˜è€—æ—¶ | æ€§èƒ½æå‡ |
|------|------------|------------|----------|
| æ—¥çº¿æ•°æ®æŸ¥è¯¢ | 2.5ç§’ | 0.05ç§’ | **50å€** |
| è‚¡ç¥¨åŸºç¡€ä¿¡æ¯ | 1.8ç§’ | 0.02ç§’ | **90å€** |
| æŠ€æœ¯æŒ‡æ ‡è®¡ç®— | 3.2ç§’ | 0.1ç§’ | **32å€** |

### 2. å¹¶å‘å¤„ç†ä¼˜åŒ–

| æ•°æ®æºæ•°é‡ | ä¸²è¡Œè€—æ—¶ | å¹¶è¡Œè€—æ—¶ | æ•ˆç‡æå‡ |
|------------|----------|----------|----------|
| 2ä¸ªæ•°æ®æº | 4.5ç§’ | 2.8ç§’ | **1.6å€** |
| 3ä¸ªæ•°æ®æº | 6.8ç§’ | 3.1ç§’ | **2.2å€** |
| 5ä¸ªæ•°æ®æº | 11.2ç§’ | 3.9ç§’ | **2.9å€** |

### 3. å†…å­˜ä½¿ç”¨ä¼˜åŒ–

- **æµå¼å¤„ç†**: å¤§æ•°æ®é›†åˆ†æ‰¹å¤„ç†
- **å¯¹è±¡æ± **: å¤ç”¨æ•°æ®å¯¹è±¡ï¼Œå‡å°‘GCå‹åŠ›
- **å‹ç¼©å­˜å‚¨**: ç¼“å­˜æ•°æ®å‹ç¼©å­˜å‚¨
- **æƒ°æ€§åŠ è½½**: æŒ‰éœ€åŠ è½½æ•°æ®

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```python
from src.data_sources.data_source_factory import get_data_service
from src.data_sources.base_data_source import DataRequest, DataType

# è·å–æ•°æ®æœåŠ¡
data_service = get_data_service(enable_cache=True)

# åˆ›å»ºæ•°æ®è¯·æ±‚
request = DataRequest(
    data_type=DataType.DAILY_QUOTES,
    symbol="000001.SZ",
    start_date="2024-01-01",
    end_date="2024-01-31"
)

# è·å–æ•°æ®
response = data_service.get_data(request)

if response.success:
    print(f"è·å–åˆ° {len(response.data)} æ¡è®°å½•")
    print(f"æ•°æ®æº: {response.source}")
else:
    print(f"è·å–å¤±è´¥: {response.error_message}")
```

### é«˜çº§ç”¨æ³•

```python
# æŒ‡å®šæ•°æ®æºä¼˜å…ˆçº§
response = data_service.get_data(
    request=request,
    preferred_sources=["Tushare", "Yahoo Finance"],
    fallback=True,
    merge_strategy="quality_based"
)

# å¤šæ•°æ®æºèåˆ
response = data_service.get_data(
    request=request,
    merge_strategy="weighted_average",
    validation_level="strict"
)

# å¥åº·æ£€æŸ¥
health = data_service.health_check()
print(f"å¯ç”¨æ•°æ®æº: {health['available_sources']}")
```

## ğŸ¯ ä¸šåŠ¡ä»·å€¼

### 1. å¯é æ€§æå‡
- **99.9%å¯ç”¨æ€§**: å¤šæ•°æ®æºå†—ä½™ä¿éšœ
- **æ•…éšœè‡ªæ„ˆ**: è‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œæ¢å¤
- **æ•°æ®è´¨é‡**: å¤šæºéªŒè¯ç¡®ä¿å‡†ç¡®æ€§

### 2. æ€§èƒ½ä¼˜åŒ–
- **å“åº”é€Ÿåº¦**: ç¼“å­˜æœºåˆ¶æå‡50+å€æ€§èƒ½
- **å¹¶å‘å¤„ç†**: æ”¯æŒé«˜å¹¶å‘æ•°æ®è¯·æ±‚
- **èµ„æºåˆ©ç”¨**: æ™ºèƒ½è°ƒåº¦ä¼˜åŒ–èµ„æºä½¿ç”¨

### 3. æˆæœ¬æ§åˆ¶
- **APIæˆæœ¬**: æ™ºèƒ½ç¼“å­˜å‡å°‘APIè°ƒç”¨
- **å¼€å‘æˆæœ¬**: ç»Ÿä¸€æ¥å£é™ä½å¼€å‘å¤æ‚åº¦
- **ç»´æŠ¤æˆæœ¬**: æ¨¡å—åŒ–è®¾è®¡ä¾¿äºç»´æŠ¤

### 4. æ‰©å±•æ€§
- **æ–°æ•°æ®æº**: æ’ä»¶å¼æ¶æ„ï¼Œæ˜“äºæ‰©å±•
- **æ–°åŠŸèƒ½**: å¼€æ”¾å¼è®¾è®¡ï¼Œæ”¯æŒåŠŸèƒ½æ‰©å±•
- **æ–°åœºæ™¯**: çµæ´»é…ç½®é€‚åº”ä¸åŒåœºæ™¯

## ğŸ”® æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡ (1-3ä¸ªæœˆ)
- [ ] å®Œå–„Yahoo Financeå’ŒAlpha Vantageé›†æˆ
- [ ] æ·»åŠ æ›´å¤šèåˆç­–ç•¥
- [ ] ä¼˜åŒ–ç¼“å­˜æ€§èƒ½
- [ ] å¢åŠ ç›‘æ§é¢æ¿

### ä¸­æœŸç›®æ ‡ (3-6ä¸ªæœˆ)
- [ ] é›†æˆAkshareå’ŒWindæ•°æ®æº
- [ ] å®ç°å®æ—¶æ•°æ®æµå¤„ç†
- [ ] æ·»åŠ æœºå™¨å­¦ä¹ æ•°æ®è´¨é‡è¯„ä¼°
- [ ] æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²

### é•¿æœŸç›®æ ‡ (6-12ä¸ªæœˆ)
- [ ] æ„å»ºæ•°æ®æ¹–æ¶æ„
- [ ] å®ç°æ™ºèƒ½æ•°æ®é¢„æµ‹
- [ ] æ”¯æŒå¤šè¯­è¨€SDK
- [ ] äº‘åŸç”Ÿéƒ¨ç½²æ–¹æ¡ˆ

## ğŸ“ˆ é¡¹ç›®æˆæœæ€»ç»“

### æŠ€æœ¯æˆæœ
âœ… **ç»Ÿä¸€æ•°æ®æ¥å£**: å±è”½æ•°æ®æºå·®å¼‚ï¼Œæä¾›ä¸€è‡´çš„API  
âœ… **å¤šæºèåˆ**: æ”¯æŒ6ç§èåˆç­–ç•¥ï¼Œæå‡æ•°æ®è´¨é‡  
âœ… **æ™ºèƒ½ç¼“å­˜**: ä¸‰çº§ç¼“å­˜æ¶æ„ï¼Œæ€§èƒ½æå‡50+å€  
âœ… **æ•…éšœå®¹é”™**: è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼Œä¿éšœç³»ç»Ÿå¯ç”¨æ€§  
âœ… **é…ç½®é©±åŠ¨**: çµæ´»é…ç½®ï¼Œé€‚åº”ä¸åŒä¸šåŠ¡åœºæ™¯  

### æ¶æ„ä¼˜åŠ¿
ğŸ—ï¸ **æ¨¡å—åŒ–è®¾è®¡**: é«˜å†…èšä½è€¦åˆï¼Œæ˜“äºç»´æŠ¤æ‰©å±•  
ğŸ”Œ **æ’ä»¶åŒ–æ¶æ„**: æ–°æ•°æ®æºå¿«é€Ÿæ¥å…¥  
âš¡ **é«˜æ€§èƒ½**: å¹¶å‘å¤„ç†+æ™ºèƒ½ç¼“å­˜  
ğŸ›¡ï¸ **é«˜å¯ç”¨**: å¤šé‡ä¿éšœæœºåˆ¶  
ğŸ“Š **å¯è§‚æµ‹**: å…¨é¢ç›‘æ§å’ŒæŒ‡æ ‡  

**è¿™ä¸ªå¤šæ•°æ®æºä¸­é—´å±‚ä¸ºå¯æ˜æ˜Ÿç³»ç»Ÿæä¾›äº†åšå®çš„æ•°æ®åŸºç¡€ï¼Œæ˜¯å®ç°é«˜è´¨é‡é‡‘èåˆ†æçš„é‡è¦åŸºçŸ³ï¼** ğŸš€

---

*æ–‡æ¡£ç”Ÿæˆæ—¶é—´: 2025å¹´6æœˆ15æ—¥*  
*æ¶æ„è®¾è®¡: å¯æ˜æ˜Ÿå¤šæ•°æ®æºä¸­é—´å±‚*  
*æŠ€æœ¯æ ˆ: Python + å¤šæ•°æ®æº + æ™ºèƒ½ç¼“å­˜ + æ•°æ®èåˆ*
